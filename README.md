# AI English Interviewer

## Опис додатку
AI English Interviewer — це веб‑додаток для проведення короткого англомовного інтерв’ю з кандидатами. Додаток автоматично задає запитання, приймає голосові відповіді користувача, аналізує їх та формує підсумковий звіт із рівнем CEFR і метриками. Інтерфейс поділено на дві панелі: камера/статус та панель запитання з діалогом і елементами керування (включно з кнопкою «Завершити відповідь»).

## Ключова логіка (покроково)
1. Привітання й інструктаж: система промовляє коротке привітання та пояснює процес.
2. Задання питання: система озвучує чергове запитання та переходить у режим «слухаємо відповідь».
3. Відповідь користувача: розпізнавання мовлення у браузері; проміжні фрагменти накопичуються у невидимому буфері.
4. Ручне завершення відповіді: користувач натискає кнопку «Завершити відповідь», після чого буферована відповідь надсилається в модуль аналізу.
5. Аналіз відповіді: провайдер LLM класифікує доречність і виставляє метрики (fluency, pronunciation, grammar, lexical, coherence) та короткий фідбек.
6. Діалог і прогрес: історія повідомлень оновлюється; індикатор прогресу відображає перебіг інтерв’ю.
7. Перехід далі: система задає наступне питання; доступні «Повторити питання» і «Далі» (пропуск).
8. Завершення: формується підсумковий звіт (CEFR, метрики, ключові помилки, перефразування) з можливістю експорту у PDF.

## Технології та роль кожної
- React (компонентний підхід, хуки) — основа UI та стану інтерв’ю.
- TypeScript — статична типізація компонентів, хуків і сервісів.
- Vite — дев‑сервер, збірка і dev‑middleware для безпечного проксування зовнішніх API під час розробки.
- Tailwind CSS (v4) — стилі, зокрема градієнти, картки, типографіка.
- Web Speech API — розпізнавання мовлення у браузері з накопиченням буфера до підтвердження користувачем.
- WebRTC — використовується провайдером Gemini Realtime (SDP, стрімінг аудіо, data‑channel подій/транскриптів).
- Google Gemini — Realtime (SDP) і REST (оцінка відповіді за промптом, JSON‑метрики).
- OpenAI Realtime — підготовлений dev‑проксі; поточний провайдер працює як оркестратор з TTS і оцінкою через Gemini REST.
- ElevenLabs TTS — озвучування привітання та питань (потоковий аудіо‑відповідь).
- Supabase (Storage + Database) — збереження фото та запис службових метрик сесії.
- Resend — демонстраційна відправка коду доступу e‑mail’ом (у dev‑середовищі).
- html2canvas + jsPDF — експорт підсумкової картки у PDF.
- ESLint — контроль якості коду; Vitest + Testing Library — тести логіки та UI‑сценаріїв.
 
## Архітектура та модулі
- Компоненти UI: екрани авторизації, інтерв’ю та звіту; панель камери/метрик; аватар/стан; діалог; елементи керування («Повторити», «Далі», «Завершити відповідь»); картка результатів.
- Хуки: RTC (доступ до камери/мікрофона, енергія сигналу), LLMRealtime (стани інтерв’ю та події), WebSpeechASR (розпізнавання мовлення), Scoring (розрахунок і агрегація метрик, підсумковий CEFR).
- Провайдери LLM: Gemini (Realtime/REST), OpenAI (оркестратор + TTS + оцінка через Gemini REST), Mock (демо).
- Інфраструктура: клієнт Supabase (anon), dev‑middleware Vite для безпечного доступу до зовнішніх сервісів під час розробки.

## Інтегровані сценарії
- Ручне завершення відповіді: прослуховування триває, доки користувач не натисне «Завершити відповідь»; лише після цього відповідь аналізується.
- Повторення питання: повторне озвучення без зміни індексу.
- Пропуск: перехід на наступне запитання без аналізу поточного.
- Звіт: підсумкова картка з оцінками, ключовими помилками, прикладами перефразувань та історією діалогу; підтримка експорту у PDF.

## Дані, безпека та приватність
- Збереження фотографій користувача у бакеті; службові метрики сесії у БД. Жодних секретних ключів у клієнті; під час розробки — доступ до сервісів лише через dev‑middleware.

## Стан і подійна модель
- Стани: idle → greeting → asking → listening → analyzing → speaking → finished. Події: репліки асистента, транскрипти користувача, готовність аналізу, енергія мовлення, можливість пропустити, прогрес. Клавішні скорочення: R (повтор), N (далі).

## Продуктивність і сумісність
- Асинхронні виклики без блокування UI, контроль «тиші», коректне керування аудіо на мобільних (розблокування аудіоконтексту). Підтримка Web Speech API залежить від браузера.

## Тестування
- Перевірка підрахунку/агрегації оцінок і базових сценаріїв компонентів; інтеграційні тести рекомендується виконувати зі стабами зовнішніх сервісів.
